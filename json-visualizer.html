<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>JSON Visualizer</title>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        html,
        body {
            height: 100%;
        }

        .wrapper {
            min-height: 100%;
            height: auto !important;
            height: 100%;
            margin-bottom: 0px;
        }

        .footer .push {
            height: 30px !important;
        }

        div {
            border-radius: 0 !important;
        }
    </style>
    <script>
        $(function () {
            $('body').on('click', '[idx="id-local-convert"]', function () {
                var obj = $(this).siblings('span').text();
                var dataElement = $(this).parent();
                var htmlData = ProcessInteractive(JSON.parse(obj));
                dataElement.html(htmlData);
            });

            function ProcessInteractive(obj) {
                var htmlValue = "<table class='table table-bordered'><tbody>";
                $.each(obj, function (key, value) {
                    if (value instanceof Array || value instanceof Object) {
                        htmlValue += "<tr><td>" + key + "</td><td><span idx='id-data'>" + JSON.stringify(
                                value) +
                            "</span>&nbsp;<button idx='id-local-convert' class='btn btn-link btn-sm'>Convert</button></td></tr>"
                    } else {
                        htmlValue += "<tr><td>" + key + "</td><td><b>" + value + "</b></td></tr>"
                    }
                });
                return htmlValue + "</tbody></table>";
            }

            function ProcessObject(obj) {
                var htmlValue = "<table class='table table-bordered'><tbody>";
                $.each(obj, function (key, value) {
                    if (value instanceof Array || value instanceof Object) {
                        htmlValue += "<tr><td>" + key + "</td><td>" + ProcessObject(value) +
                            "</td></tr>"
                    } else {
                        htmlValue += "<tr><td>" + key + "</td><td><b>" + value + "</b></td></tr>"
                    }
                });
                return htmlValue + "</tbody></table>";
            }

            function Process(jsonstring, interactive) {
                try {
                    var obj = $.parseJSON(jsonstring);
                    if (obj instanceof Array || obj instanceof Object) {
                        var result = ""
                        if (interactive) {
                            result = ProcessInteractive(obj);
                        } else {
                            result = ProcessObject(obj);
                        }
                        $("#id-jbody").html(result);
                    } else {
                        $("#id-jbody").html(obj);
                    }

                    $("#id-result").show();
                    $("#id-clear,#id-convert-i").show();
                    $("#id-alert").hide().text("");
                } catch (err) {
                    $("#id-alert").show().text(err);
                    $("#id-input").focus().select();
                    setTimeout(function () {
                        $("#id-alert").hide().text("");
                    }, 8000);
                }
            }

            $('#id-input').focus().on('paste', function (data) {
                setTimeout(function () {
                    var jsontext = $('#id-input').val();
                    Process(jsontext, false);
                }, 100);

            }).keydown(function () {
                setTimeout(function () {
                    if ($('#id-input').val() == "") {
                        $('#id-convert,#id-clear,#id-convert-i').hide();
                        $("#id-jbody").html("");
                        $("#id-result").hide();
                        $("#id-alert").hide().text("");
                    } else {
                        $('#id-convert,#id-clear,#id-convert-i').show();
                    }
                }, 100);
            });

            $('#id-convert').click(function () {
                var jsontext = $('#id-input').val();
                Process(jsontext, false);
            });

            $('#id-convert-i').click(function () {
                var jsontext = $('#id-input').val();
                Process(jsontext, true);
            });

            $("#id-clear").click(function () {
                $("#id-jbody").html("");
                $("#id-result").hide();
                $('#id-input').val("").focus();
                $('#id-convert,#id-clear', "#id-convert-i").hide();
                $("#id-alert").hide().text("");
            });
        });
    </script>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" media="screen"
    />
</head>

<body>
    <div class="wrapper">
        <div class="container">
            <div class="page-header">
                <h1>Json Visualizer&nbsp;<small>Gives visual representation of JSON data</small></h1>
            </div>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div>
                        <textarea class="form-control" rows="8" id="id-input" placeholder="Paste or Enter JSON data"></textarea>
                    </div>
                    <div>
                        <button type="button" class="btn btn-info" id="id-clear" style="margin-top:10px;display:none;">Clear</button>
                        <button type="button" class="btn btn-primary" id="id-convert" style="margin-top:10px;display:none;">Convert</button>
                        <button type="button" class="btn btn-primary" id="id-convert-i" style="margin-top:10px;display:none;">Interactive</button>
                    </div>
                </div>
            </div>
            <div class="alert alert-warning" id="id-alert" style="display:none;" role="alert"></div>
            <div class="panel panel-default" id="id-result" style="display:none;margin-bottom: 75px;">

                <div class="panel-body">
                    <div>
                        <table class="table table-bordered">
                            <tbody id="id-jbody">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>